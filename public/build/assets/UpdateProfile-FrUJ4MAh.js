import{m as U,f as _,u as V,r as S,c as i,a as s,p as l,k as m,t as n,d as j,h as b,i as c,v as p,z as E,b as w,F as D,o as d}from"./app-Dlfs4giq.js";import{u as F}from"./toastr-Dvm0Ch-q.js";const L={class:"content-header"},M={class:"container-fluid"},z={class:"row mb-2"},B={key:0,class:"col-sm-6"},I={class:"content"},T={class:"container-fluid"},A={class:"row",style:{"margin-bottom":"100px"}},W={class:"col-md-3"},H={class:"card card-primary card-outline"},J={class:"card-body box-profile"},$={class:"text-center"},q=["src"],G={class:"profile-username text-center"},K={class:"text-muted text-center"},O={class:"col-md-9"},Q={class:"card"},R={class:"card-body"},X={class:"tab-content"},Y={class:"tab-pane active",id:"profile"},Z={class:"form-group row"},ss={class:"col-sm-10"},es={key:0,class:"text-danger text-sm"},as={class:"form-group row"},os={class:"col-sm-10"},ts={key:0,class:"text-danger text-sm"},ls={class:"form-group row"},rs={class:"col-sm-10"},is={key:0,class:"text-danger text-sm"},ns={class:"form-group row"},ds={class:"col-sm-10"},us={key:0,class:"text-danger text-sm"},ms={class:"form-group row"},cs={class:"col-sm-10"},ps={key:0,class:"text-danger text-sm"},fs={class:"form-group row"},vs={class:"col-sm-10"},_s={key:0,class:"text-danger text-sm"},bs={class:"tab-pane",id:"changePassword"},ws={class:"form-group row"},gs={class:"col-sm-9"},ys={key:0,class:"text-danger text-sm"},ks={class:"form-group row"},hs={class:"col-sm-9"},xs={key:0,class:"text-danger text-sm"},Ps={class:"form-group row"},Cs={class:"col-sm-9"},Ss={__name:"UpdateProfile",setup(Ns){const y=U(),v=_(""),k=window.cloudinary.createUploadWidget({cloud_name:"kemenagpessel",upload_preset:"profile_picture_pegawai"},(r,e)=>{!r&&e&&e.event==="success"&&(console.log("Done Uploading...",e.info),v.value=e.info.secure_url),!r&&e&&e.event=="close"&&N()});function h(){k.open()}const o=V(),f=F(),a=_([]),x=()=>{axios.put("/api/profile",{name:o.user.name,email:o.user.email,role:o.user.role,nama_pemeriksa:o.user.nama_pemeriksa,nip_pemeriksa:o.user.nip_pemeriksa,jabatan:o.user.jabatan,print_layout:o.user.print_layout}).then(r=>{f.success("Profile updated successfully!")}).catch(r=>{r.response&&r.response.status===422&&(a.value=r.response.data.errors)})},P=()=>{o.logout()},u=S({currentPassword:"",password:"",passwordConfirmation:""}),C=()=>{a.value="",axios.post("/api/change-user-password",u).then(r=>{f.success(r.data.message);for(const e in u)u[e]=""}).catch(r=>{r.response&&r.response.status===422&&(a.value=r.response.data.errors)})};_(null);const N=r=>{v.value!=""?axios.post("/api/upload-profile-image",{profile_picture:v.value}).then(e=>{o.getAuthUser(),f.success("Image uploaded successfully!")}):f.error("Image failed to upload!")};return(r,e)=>{var g;return d(),i(D,null,[s("div",L,[s("div",M,[s("div",z,[e[11]||(e[11]=s("div",{class:"col-sm-6"},[s("h1",{class:"m-0"},"Profile")],-1)),l(y).isMobile?m("",!0):(d(),i("div",B,e[10]||(e[10]=[s("ol",{class:"breadcrumb float-sm-right"},[s("li",{class:"breadcrumb-item"},[s("a",{href:"#"},"Home")]),s("li",{class:"breadcrumb-item active"},"Profile")],-1)])))])])]),s("div",I,[s("div",T,[s("div",A,[s("div",W,[s("div",H,[s("div",J,[s("div",$,[s("img",{onClick:h,class:"profile-user-img img-circle",src:(g=l(o).user)==null?void 0:g.avatar,alt:"User profile picture"},null,8,q)]),s("h3",G,n(l(o).user.name),1),s("p",K,n(l(o).user.role),1)])])]),s("div",O,[s("div",Q,[e[24]||(e[24]=j('<div class="card-header p-2"><ul class="nav nav-pills"><li class="nav-item"><a class="nav-link active" href="#profile" data-toggle="tab"><i class="fa fa-user mr-1"></i> Edit Profile</a></li><li class="nav-item"><a class="nav-link" href="#changePassword" data-toggle="tab"><i class="fa fa-key mr-1"></i> Change Password</a></li></ul></div>',1)),s("div",R,[s("div",X,[s("div",Y,[s("form",{onSubmit:e[6]||(e[6]=b(t=>x(),["prevent"])),class:"form-horizontal"},[s("div",Z,[e[12]||(e[12]=s("label",{for:"inputName",class:"col-sm-2 col-form-label"},"Name",-1)),s("div",ss,[c(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l(o).user.name=t),type:"text",class:"form-control",id:"inputName",placeholder:"Name"},null,512),[[p,l(o).user.name]]),a.value&&a.value.name?(d(),i("span",es,n(a.value.name[0]),1)):m("",!0)])]),s("div",as,[e[13]||(e[13]=s("label",{for:"inputEmail",class:"col-sm-2 col-form-label"},"Email",-1)),s("div",os,[c(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l(o).user.email=t),type:"email",class:"form-control",id:"inputEmail",placeholder:"Email"},null,512),[[p,l(o).user.email]]),a.value&&a.value.email?(d(),i("span",ts,n(a.value.email[0]),1)):m("",!0)])]),s("div",ls,[e[14]||(e[14]=s("label",{for:"jabatan",class:"col-sm-2 col-form-label"},"Jabatan",-1)),s("div",rs,[c(s("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l(o).user.jabatan=t),type:"text",class:"form-control",id:"jabatan",placeholder:"Nama Pemeriksa"},null,512),[[p,l(o).user.jabatan]]),a.value&&a.value.jabatan?(d(),i("span",is,n(a.value.jabatan[0]),1)):m("",!0)])]),s("div",ns,[e[15]||(e[15]=s("label",{for:"nama_pemeriksa",class:"col-sm-2 col-form-label"},"Nama Pemeriksa",-1)),s("div",ds,[c(s("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>l(o).user.nama_pemeriksa=t),type:"text",class:"form-control",id:"nama_pemeriksa",placeholder:"Nama Pemeriksa"},null,512),[[p,l(o).user.nama_pemeriksa]]),a.value&&a.value.nama_pemeriksa?(d(),i("span",us,n(a.value.nama_pemeriksa[0]),1)):m("",!0)])]),s("div",ms,[e[16]||(e[16]=s("label",{for:"nip_pemeriksa",class:"col-sm-2 col-form-label"},"NIP Pemeriksa",-1)),s("div",cs,[c(s("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>l(o).user.nip_pemeriksa=t),type:"text",class:"form-control",id:"nip_pemeriksa",placeholder:"Nama Pemeriksa"},null,512),[[p,l(o).user.nip_pemeriksa]]),a.value&&a.value.nip_pemeriksa?(d(),i("span",ps,n(a.value.nip_pemeriksa[0]),1)):m("",!0)])]),s("div",fs,[e[18]||(e[18]=s("label",{for:"print_layout",class:"col-sm-2 col-form-label"},"Print Layout",-1)),s("div",vs,[c(s("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>l(o).user.print_layout=t),name:"print_layout",id:"print_layout",class:"form-control"},e[17]||(e[17]=[s("option",{value:"L"},"Landscape",-1),s("option",{value:"P"},"Portrait",-1)]),512),[[E,l(o).user.print_layout]]),a.value&&a.value.print_layout?(d(),i("span",_s,n(a.value.print_layout[0]),1)):m("",!0)])]),e[19]||(e[19]=s("div",{class:"form-group row"},[s("div",{class:"offset-sm-2 col-sm-10"},[s("button",{type:"submit",class:"btn btn-success"},[s("i",{class:"fa fa-save mr-1"}),w(" Save Changes")])])],-1))],32)]),s("div",bs,[s("form",{onSubmit:b(C,["prevent"]),class:"form-horizontal"},[s("div",ws,[e[20]||(e[20]=s("label",{for:"currentPassword",class:"col-sm-3 col-form-label"},"Current Password",-1)),s("div",gs,[c(s("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>u.currentPassword=t),type:"password",class:"form-control",id:"currentPassword",placeholder:"Current Password"},null,512),[[p,u.currentPassword]]),a.value&&a.value.current_password?(d(),i("span",ys,n(a.value.current_password[0]),1)):m("",!0)])]),s("div",ks,[e[21]||(e[21]=s("label",{for:"newPassword",class:"col-sm-3 col-form-label"},"New Password",-1)),s("div",hs,[c(s("input",{"onUpdate:modelValue":e[8]||(e[8]=t=>u.password=t),type:"password",class:"form-control",id:"newPassword",placeholder:"New Password"},null,512),[[p,u.password]]),a.value&&a.value.password?(d(),i("span",xs,n(a.value.password[0]),1)):m("",!0)])]),s("div",Ps,[e[22]||(e[22]=s("label",{for:"passwordConfirmation",class:"col-sm-3 col-form-label"},"Confirm New Password",-1)),s("div",Cs,[c(s("input",{"onUpdate:modelValue":e[9]||(e[9]=t=>u.passwordConfirmation=t),type:"password",class:"form-control",id:"passwordConfirmation",placeholder:"Confirm New Password"},null,512),[[p,u.passwordConfirmation]])])]),e[23]||(e[23]=s("div",{class:"form-group row"},[s("div",{class:"offset-sm-3 col-sm-9"},[s("button",{type:"submit",class:"btn btn-success"},[s("i",{class:"fa fa-save mr-1"}),w(" Save Changes")])])],-1))],32)])])])]),s("button",{onClick:b(P,["prevent"]),type:"button",class:"btn btn-danger btn-block"},e[25]||(e[25]=[s("i",{class:"fas fa-sign-out-alt"},null,-1),w(" Logout")]))])])])])],64)}}};export{Ss as default};
