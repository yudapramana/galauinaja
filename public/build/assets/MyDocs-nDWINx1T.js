import{_ as U,g as p,u as F,N as k,y as N,c as o,a as e,t as d,I as T,j as y,v as V,F as f,z as w,l as D,o as l,A as $,b as C,O as z,p as A,e as B}from"./app-Dj2lpDik.js";import{u as E}from"./MasterDataStore-DtEJgPlY.js";import"./LoadingStore-DQIEXr-H.js";const i=r=>(A("data-v-83d566b7"),r=r(),B(),r),P=i(()=>e("section",{class:"content-header"},[e("div",{class:"container-fluid"},[e("h3",{class:"text-primary"},"ðŸ“‚ Daftar Dokumen")])],-1)),j={class:"content"},q={class:"container-fluid"},O={class:"mb-3"},Q={class:"d-block mb-1 text-muted font-weight-bold"},R={class:"progress",style:{height:"20px"}},G=["aria-valuenow"],H={class:"card shadow-sm rounded-lg"},J={class:"card-body p-3"},K={class:"input-group mb-3"},W={key:0,class:"text-center p-5"},X=i(()=>e("div",{class:"spinner-border text-primary mb-2",role:"status"},[e("span",{class:"sr-only"},"Loading...")],-1)),Y=i(()=>e("div",{class:"text-muted"},"Memuat daftar dokumen...",-1)),Z=[X,Y],ee={key:1,class:"tree"},se={class:"list-unstyled mb-0"},te=["onClick"],ae={class:"ml-2 font-weight-bold"},oe={class:"badge badge-pill badge-primary ml-2"},le={class:"pl-4 mt-1"},ne=["onClick"],ie=i(()=>e("i",{class:"fas fa-file-pdf text-danger mr-2"},null,-1)),de={key:0,class:"text-muted small ml-4 mt-1"},ce={key:2,class:"text-center p-5"},re=i(()=>e("span",{class:"text-muted"},"Data tidak ditemukan.",-1)),ue=[re],_e={key:0,class:"modal fade show",style:{display:"block"},tabindex:"-1","aria-modal":"true"},me={class:"modal-dialog modal-xl"},pe={class:"modal-content"},he={class:"modal-header p-2"},ve=i(()=>e("h5",{class:"modal-title"},"Preview Dokumen",-1)),ge=i(()=>e("span",null,"Ã—",-1)),fe=[ge],be={class:"modal-body p-2"},xe=["src"],ke={__name:"MyDocs",setup(r){const h=p([]),u=p(null),c=p(""),v=p(!1),b=E(),_=F(),m=k(()=>{var t,a;return((a=(t=_.user)==null?void 0:t.employee)==null?void 0:a.progress_dokumen)||0}),S=async()=>{console.log("eh kepanggil fetchdata didalam Doclist"),await b.getDoctypeList(),await _.getMyDocuments();const t=b.doctypeList,a=_.myDocuments;h.value=t.map(s=>{const g=a.filter(n=>(n.id_doc_type===s.id||n.doc_type_id===s.id||n.doc_type===s.id)&&n.status==="Approved");return{id:s.id,text:s.text,expanded:!0,files:g}})},L=t=>{t.expanded=!t.expanded},M=t=>{u.value=t},I=()=>{c.value=""},x=k(()=>{if(!c.value)return h.value;const t=c.value.toLowerCase();return h.value.filter(a=>a.text.toLowerCase().includes(t)||a.files.some(s=>s.file_name.toLowerCase().includes(t)))});return N(async()=>{v.value=!0,await _.getDocsUpdateState(),console.log("eh kepanggil fetchdata didalam onMounted Doclist"),await S(),v.value=!1}),(t,a)=>(l(),o(f,null,[P,e("section",j,[e("div",q,[e("div",O,[e("label",Q," Progress Dokumen: "+d(m.value)+"% ",1),e("div",R,[e("div",{class:"progress-bar bg-success",style:T({width:m.value+"%"}),role:"progressbar","aria-valuenow":m.value,"aria-valuemin":"0","aria-valuemax":"100"},d(m.value)+"% ",13,G)])]),e("div",H,[e("div",J,[e("div",K,[y(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=s=>c.value=s),class:"form-control",placeholder:"Cari dokumen..."},null,512),[[V,c.value]]),e("div",{class:"input-group-append"},[e("button",{class:"btn btn-outline-secondary",type:"button",onClick:I},"Reset")])]),v.value?(l(),o("div",W,Z)):x.value.length?(l(),o("div",ee,[e("ul",se,[(l(!0),o(f,null,w(x.value,(s,g)=>(l(),o("li",{key:s.id,class:"mb-2"},[e("div",{onClick:n=>L(s),class:"d-flex align-items-center cursor-pointer py-1 px-2 bg-light rounded small"},[e("i",{class:$([s.expanded?"fas fa-folder-open text-warning":"fas fa-folder text-secondary","mr-2"])},null,2),e("span",ae,[C(d(g+1)+". "+d(s.text)+" ",1),e("span",oe,d(s.files.length),1)])],8,te),y(e("ul",le,[(l(!0),o(f,null,w(s.files,n=>(l(),o("li",{key:n.id,onClick:ye=>M(n.file_url),class:"cursor-pointer p-1 rounded hover-bg-light small"},[ie,C(" "+d(n.file_name),1)],8,ne))),128)),s.files.length?D("",!0):(l(),o("li",de," Tidak ada file diupload. "))],512),[[z,s.expanded]])]))),128))])])):(l(),o("div",ce,ue))])])])]),u.value?(l(),o("div",_e,[e("div",me,[e("div",pe,[e("div",he,[ve,e("button",{type:"button",class:"close",onClick:a[1]||(a[1]=s=>u.value=null)},fe)]),e("div",be,[e("iframe",{src:`${u.value}#toolbar=0&navpanes=0&scrollbar=0`,class:"w-100",style:{height:"90vh",border:"none"}},null,8,xe)])])])])):D("",!0)],64))}},Se=U(ke,[["__scopeId","data-v-83d566b7"]]);export{Se as default};
