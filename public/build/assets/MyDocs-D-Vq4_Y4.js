import{_ as M,h as u,f as U,u as F,R as I,y as T,c as a,a as e,k as b,v as V,F as f,C as k,m as y,o,D as $,b as D,t as _,S as B,p as N,e as A}from"./app-D5nhrGxl.js";const i=c=>(N("data-v-a985b0af"),c=c(),A(),c),E=i(()=>e("section",{class:"content-header"},[e("div",{class:"container-fluid"},[e("h3",{class:"text-primary"},"ðŸ“‚ Daftar Dokumen")])],-1)),R={class:"content"},q={class:"container-fluid"},z={class:"card shadow-sm rounded-lg"},P={class:"card-body p-3"},Q={class:"input-group mb-3"},j={key:0,class:"text-center p-5"},G=i(()=>e("div",{class:"spinner-border text-primary mb-2",role:"status"},[e("span",{class:"sr-only"},"Loading...")],-1)),H=i(()=>e("div",{class:"text-muted"},"Memuat daftar dokumen...",-1)),J=[G,H],K={key:1,class:"tree"},O={class:"list-unstyled mb-0"},W=["onClick"],X={class:"ml-2 font-weight-bold"},Y={class:"badge badge-pill badge-primary ml-2"},Z={class:"pl-4 mt-1"},ee=["onClick"],se=i(()=>e("i",{class:"fas fa-file-pdf text-danger mr-2"},null,-1)),te={key:0,class:"text-muted small ml-4 mt-1"},ae={key:2,class:"text-center p-5"},oe=i(()=>e("span",{class:"text-muted"},"Data tidak ditemukan.",-1)),le=[oe],ne={key:0,class:"modal fade show",style:{display:"block"},tabindex:"-1","aria-modal":"true"},ie={class:"modal-dialog modal-xl"},de={class:"modal-content"},ce={class:"modal-header p-2"},re=i(()=>e("h5",{class:"modal-title"},"Preview Dokumen",-1)),ue=i(()=>e("span",null,"Ã—",-1)),_e=[ue],pe={class:"modal-body p-2"},me=["src"],he={__name:"MyDocs",setup(c){const p=u([]),r=u(null),d=u(""),g=U(),m=F(),h=u(!1),w=async()=>{console.log("eh kepanggil fetchdata didalam Doclist"),await g.getDoctypeList(),await m.getMyDocuments();const t=g.doctypeList,l=m.myDocuments;p.value=t.map(s=>{const v=l.filter(n=>(n.id_doc_type===s.id||n.doc_type_id===s.id||n.doc_type===s.id)&&n.status==="Approved");return{id:s.id,text:s.text,expanded:!0,files:v}})},C=t=>{t.expanded=!t.expanded},S=t=>{r.value=t},L=()=>{d.value=""},x=I(()=>{if(!d.value)return p.value;const t=d.value.toLowerCase();return p.value.filter(l=>l.text.toLowerCase().includes(t)||l.files.some(s=>s.file_name.toLowerCase().includes(t)))});return T(async()=>{h.value=!0,await m.getDocsUpdateState(),console.log("eh kepanggil fetchdata didalam onMounted Doclist"),await w(),h.value=!1}),(t,l)=>(o(),a(f,null,[E,e("section",R,[e("div",q,[e("div",z,[e("div",P,[e("div",Q,[b(e("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=s=>d.value=s),class:"form-control",placeholder:"Cari dokumen..."},null,512),[[V,d.value]]),e("div",{class:"input-group-append"},[e("button",{class:"btn btn-outline-secondary",type:"button",onClick:L},"Reset")])]),h.value?(o(),a("div",j,J)):x.value.length?(o(),a("div",K,[e("ul",O,[(o(!0),a(f,null,k(x.value,(s,v)=>(o(),a("li",{key:s.id,class:"mb-2"},[e("div",{onClick:n=>C(s),class:"d-flex align-items-center cursor-pointer py-1 px-2 bg-light rounded small"},[e("i",{class:$([s.expanded?"fas fa-folder-open text-warning":"fas fa-folder text-secondary","mr-2"])},null,2),e("span",X,[D(_(v+1)+". "+_(s.text)+" ",1),e("span",Y,_(s.files.length),1)])],8,W),b(e("ul",Z,[(o(!0),a(f,null,k(s.files,n=>(o(),a("li",{key:n.id,onClick:ve=>S(n.file_url),class:"cursor-pointer p-1 rounded hover-bg-light small"},[se,D(" "+_(n.file_name),1)],8,ee))),128)),s.files.length?y("",!0):(o(),a("li",te," Tidak ada file diupload. "))],512),[[B,s.expanded]])]))),128))])])):(o(),a("div",ae,le))])])])]),r.value?(o(),a("div",ne,[e("div",ie,[e("div",de,[e("div",ce,[re,e("button",{type:"button",class:"close",onClick:l[1]||(l[1]=s=>r.value=null)},_e)]),e("div",pe,[e("iframe",{src:`${r.value}#toolbar=0&navpanes=0&scrollbar=0`,class:"w-100",style:{height:"90vh",border:"none"}},null,8,me)])])])])):y("",!0)],64))}},ge=M(he,[["__scopeId","data-v-a985b0af"]]);export{ge as default};
