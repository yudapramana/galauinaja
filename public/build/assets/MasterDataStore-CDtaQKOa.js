import{S as L,G as o,g as s,u as h,m as g}from"./app-ClEBpTSD.js";import{u as p}from"./LoadingStore-DaenCWHc.js";const M=L("MasterDataStore",()=>{const l=o("MasterDataStore:orgId",s("")),u=o("MasterDataStore:userId",s("")),d=o("MasterDataStore:orgList",s([])),c=o("MasterDataStore:userList",s({})),r=o("MasterDataStore:doctypeList",s([])),i=o("MasterDataStore:workunitList",s([])),t=p(),n=h();return{orgId:l,userId:u,orgList:d,userList:c,doctypeList:r,workunitList:i,getUserList:async e=>{t.toggleLoading(),await g.get("/api/master",{params:{type:"users",id:e}}).then(a=>{c.value=a.data.data,t.toggleLoading()}).catch(a=>{t.toggleLoading(),n.handleAuthError(a)})},getDoctypeList:async(e=null)=>{if(console.log("doctypeList.value.length:",r.value.length),r.value.length===0||n.user.role=="SUPERADMIN"){t.toggleLoading();try{const a=await g.get("/api/master",{params:{type:"doctypes",...e&&{user_id:e}}});r.value=a.data.data}catch(a){console.error("doctypeList fetch error:",a),n.handleAuthError(a)}finally{t.toggleLoading()}}},getWorkunitList:async()=>{i.value.length==0&&(t.toggleLoading(),await g.get("/api/master",{params:{type:"workunits"}}).then(e=>{i.value=e.data.data,t.toggleLoading(),console.log("workunitList hasbeenfetched")}).catch(e=>{t.toggleLoading(),n.handleAuthError(e)}))}}});export{M as u};
