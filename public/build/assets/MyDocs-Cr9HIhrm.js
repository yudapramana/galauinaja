import{_ as M,c as u,a as U,u as B,R as F,x as I,d as a,f as e,h as k,v as T,F as f,B as y,j as b,o,C as V,l as D,t as _,S as N,p as $,k as A}from"./app-CZjyxVNa.js";const d=c=>($("data-v-1ddae692"),c=c(),A(),c),E=d(()=>e("section",{class:"content-header"},[e("div",{class:"container-fluid"},[e("h3",{class:"text-primary"},"ðŸ“‚ Daftar Dokumen")])],-1)),R={class:"content"},j={class:"container-fluid"},q={class:"card shadow-sm rounded-lg"},z={class:"card-body p-3"},P={class:"input-group mb-3"},Q={key:0,class:"text-center p-5"},G=d(()=>e("div",{class:"spinner-border text-primary mb-2",role:"status"},[e("span",{class:"sr-only"},"Loading...")],-1)),H=d(()=>e("div",{class:"text-muted"},"Memuat daftar dokumen...",-1)),J=[G,H],K={key:1,class:"tree"},O={class:"list-unstyled mb-0"},W=["onClick"],X={class:"ml-2 font-weight-bold"},Y={class:"badge badge-pill badge-primary ml-2"},Z={class:"pl-4 mt-1"},ee=["onClick"],se=d(()=>e("i",{class:"fas fa-file-pdf text-danger mr-2"},null,-1)),te={key:0,class:"text-muted small ml-4 mt-1"},ae={key:2,class:"text-center p-5"},oe=d(()=>e("span",{class:"text-muted"},"Data tidak ditemukan.",-1)),le=[oe],ne={key:0,class:"modal fade show",style:{display:"block"},tabindex:"-1","aria-modal":"true"},de={class:"modal-dialog modal-fullscreen"},ie={class:"modal-content"},ce={class:"modal-header p-2"},re=d(()=>e("h5",{class:"modal-title"},"Preview Dokumen",-1)),ue=d(()=>e("span",null,"Ã—",-1)),_e=[ue],pe={class:"modal-body p-2"},he=["src"],me={__name:"MyDocs",setup(c){const p=u([]),r=u(null),i=u(""),g=U(),h=B(),m=u(!1),w=async()=>{console.log("eh kepanggil fetchdata didalam Doclist"),await g.getDoctypeList(),await h.getMyDocuments();const t=g.doctypeList,l=h.myDocuments;p.value=t.map(s=>{const v=l.filter(n=>(n.id_doc_type===s.id||n.doc_type_id===s.id||n.doc_type===s.id)&&n.status==="Approved");return{id:s.id,text:s.text,expanded:!0,files:v}})},C=t=>{t.expanded=!t.expanded},S=t=>{r.value=t},L=()=>{i.value=""},x=F(()=>{if(!i.value)return p.value;const t=i.value.toLowerCase();return p.value.filter(l=>l.text.toLowerCase().includes(t)||l.files.some(s=>s.file_name.toLowerCase().includes(t)))});return I(async()=>{m.value=!0,await h.getDocsUpdateState(),console.log("eh kepanggil fetchdata didalam onMounted Doclist"),await w(),m.value=!1}),(t,l)=>(o(),a(f,null,[E,e("section",R,[e("div",j,[e("div",q,[e("div",z,[e("div",P,[k(e("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=s=>i.value=s),class:"form-control",placeholder:"Cari dokumen..."},null,512),[[T,i.value]]),e("div",{class:"input-group-append"},[e("button",{class:"btn btn-outline-secondary",type:"button",onClick:L},"Reset")])]),m.value?(o(),a("div",Q,J)):x.value.length?(o(),a("div",K,[e("ul",O,[(o(!0),a(f,null,y(x.value,(s,v)=>(o(),a("li",{key:s.id,class:"mb-2"},[e("div",{onClick:n=>C(s),class:"d-flex align-items-center cursor-pointer py-1 px-2 bg-light rounded small"},[e("i",{class:V([s.expanded?"fas fa-folder-open text-warning":"fas fa-folder text-secondary","mr-2"])},null,2),e("span",X,[D(_(v+1)+". "+_(s.text)+" ",1),e("span",Y,_(s.files.length),1)])],8,W),k(e("ul",Z,[(o(!0),a(f,null,y(s.files,n=>(o(),a("li",{key:n.id,onClick:ve=>S(n.file_url),class:"cursor-pointer p-1 rounded hover-bg-light small"},[se,D(" "+_(n.file_name),1)],8,ee))),128)),s.files.length?b("",!0):(o(),a("li",te," Tidak ada file diupload. "))],512),[[N,s.expanded]])]))),128))])])):(o(),a("div",ae,le))])])])]),r.value?(o(),a("div",ne,[e("div",de,[e("div",ie,[e("div",ce,[re,e("button",{type:"button",class:"close",onClick:l[1]||(l[1]=s=>r.value=null)},_e)]),e("div",pe,[e("iframe",{src:r.value,class:"w-100",style:{height:"90vh",border:"none"}},null,8,he)])])])])):b("",!0)],64))}},ge=M(me,[["__scopeId","data-v-1ddae692"]]);export{ge as default};
