import{n as U,g as v,u as V,r as S,c as n,a as s,s as l,l as u,t as i,i as h,j as m,v as p,B as j,b,F as E,d as D,o as c}from"./app-Dj2lpDik.js";import{u as B}from"./toastr-DxH3t6AE.js";const F={class:"content-header"},L={class:"container-fluid"},M={class:"row mb-2"},I=s("div",{class:"col-sm-6"},[s("h1",{class:"m-0"},"Profile")],-1),T={key:0,class:"col-sm-6"},z=s("ol",{class:"breadcrumb float-sm-right"},[s("li",{class:"breadcrumb-item"},[s("a",{href:"#"},"Home")]),s("li",{class:"breadcrumb-item active"},"Profile")],-1),A=[z],W={class:"content"},H={class:"container-fluid"},J={class:"row",style:{"margin-bottom":"100px"}},$={class:"col-md-3"},q={class:"card card-primary card-outline"},G={class:"card-body box-profile"},K={class:"text-center"},O=["src"],Q={class:"profile-username text-center"},R={class:"text-muted text-center"},X={class:"col-md-9"},Y={class:"card"},Z=D('<div class="card-header p-2"><ul class="nav nav-pills"><li class="nav-item"><a class="nav-link active" href="#profile" data-toggle="tab"><i class="fa fa-user mr-1"></i> Edit Profile</a></li><li class="nav-item"><a class="nav-link" href="#changePassword" data-toggle="tab"><i class="fa fa-key mr-1"></i> Change Password</a></li></ul></div>',1),ss={class:"card-body"},es={class:"tab-content"},os={class:"tab-pane active",id:"profile"},as={class:"form-group row"},ts=s("label",{for:"inputName",class:"col-sm-2 col-form-label"},"Name",-1),ls={class:"col-sm-10"},rs={key:0,class:"text-danger text-sm"},ns={class:"form-group row"},is=s("label",{for:"inputEmail",class:"col-sm-2 col-form-label"},"Email",-1),cs={class:"col-sm-10"},ds={key:0,class:"text-danger text-sm"},us={class:"form-group row"},ms=s("label",{for:"jabatan",class:"col-sm-2 col-form-label"},"Jabatan",-1),ps={class:"col-sm-10"},_s={key:0,class:"text-danger text-sm"},fs={class:"form-group row"},vs=s("label",{for:"nama_pemeriksa",class:"col-sm-2 col-form-label"},"Nama Pemeriksa",-1),hs={class:"col-sm-10"},bs={key:0,class:"text-danger text-sm"},ws={class:"form-group row"},gs=s("label",{for:"nip_pemeriksa",class:"col-sm-2 col-form-label"},"NIP Pemeriksa",-1),ys={class:"col-sm-10"},ks={key:0,class:"text-danger text-sm"},xs={class:"form-group row"},Ps=s("label",{for:"print_layout",class:"col-sm-2 col-form-label"},"Print Layout",-1),Cs={class:"col-sm-10"},Ns=s("option",{value:"L"},"Landscape",-1),Us=s("option",{value:"P"},"Portrait",-1),Vs=[Ns,Us],Ss={key:0,class:"text-danger text-sm"},js=s("div",{class:"form-group row"},[s("div",{class:"offset-sm-2 col-sm-10"},[s("button",{type:"submit",class:"btn btn-success"},[s("i",{class:"fa fa-save mr-1"}),b(" Save Changes")])])],-1),Es={class:"tab-pane",id:"changePassword"},Ds={class:"form-group row"},Bs=s("label",{for:"currentPassword",class:"col-sm-3 col-form-label"},"Current Password",-1),Fs={class:"col-sm-9"},Ls={key:0,class:"text-danger text-sm"},Ms={class:"form-group row"},Is=s("label",{for:"newPassword",class:"col-sm-3 col-form-label"},"New Password",-1),Ts={class:"col-sm-9"},zs={key:0,class:"text-danger text-sm"},As={class:"form-group row"},Ws=s("label",{for:"passwordConfirmation",class:"col-sm-3 col-form-label"},"Confirm New Password",-1),Hs={class:"col-sm-9"},Js=s("div",{class:"form-group row"},[s("div",{class:"offset-sm-3 col-sm-9"},[s("button",{type:"submit",class:"btn btn-success"},[s("i",{class:"fa fa-save mr-1"}),b(" Save Changes")])])],-1),$s=s("i",{class:"fas fa-sign-out-alt"},null,-1),Os={__name:"UpdateProfile",setup(qs){const g=U(),f=v(""),y=window.cloudinary.createUploadWidget({cloud_name:"kemenagpessel",upload_preset:"profile_picture_pegawai"},(r,e)=>{!r&&e&&e.event==="success"&&(console.log("Done Uploading...",e.info),f.value=e.info.secure_url),!r&&e&&e.event=="close"&&N()});function k(){y.open()}const a=V(),_=B(),o=v([]),x=()=>{axios.put("/api/profile",{name:a.user.name,email:a.user.email,role:a.user.role,nama_pemeriksa:a.user.nama_pemeriksa,nip_pemeriksa:a.user.nip_pemeriksa,jabatan:a.user.jabatan,print_layout:a.user.print_layout}).then(r=>{_.success("Profile updated successfully!")}).catch(r=>{r.response&&r.response.status===422&&(o.value=r.response.data.errors)})},P=()=>{a.logout()},d=S({currentPassword:"",password:"",passwordConfirmation:""}),C=()=>{o.value="",axios.post("/api/change-user-password",d).then(r=>{_.success(r.data.message);for(const e in d)d[e]=""}).catch(r=>{r.response&&r.response.status===422&&(o.value=r.response.data.errors)})};v(null);const N=r=>{f.value!=""?axios.post("/api/upload-profile-image",{profile_picture:f.value}).then(e=>{a.getAuthUser(),_.success("Image uploaded successfully!")}):_.error("Image failed to upload!")};return(r,e)=>{var w;return c(),n(E,null,[s("div",F,[s("div",L,[s("div",M,[I,l(g).isMobile?u("",!0):(c(),n("div",T,A))])])]),s("div",W,[s("div",H,[s("div",J,[s("div",$,[s("div",q,[s("div",G,[s("div",K,[s("img",{onClick:k,class:"profile-user-img img-circle",src:(w=l(a).user)==null?void 0:w.avatar,alt:"User profile picture"},null,8,O)]),s("h3",Q,i(l(a).user.name),1),s("p",R,i(l(a).user.role),1)])])]),s("div",X,[s("div",Y,[Z,s("div",ss,[s("div",es,[s("div",os,[s("form",{onSubmit:e[6]||(e[6]=h(t=>x(),["prevent"])),class:"form-horizontal"},[s("div",as,[ts,s("div",ls,[m(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l(a).user.name=t),type:"text",class:"form-control",id:"inputName",placeholder:"Name"},null,512),[[p,l(a).user.name]]),o.value&&o.value.name?(c(),n("span",rs,i(o.value.name[0]),1)):u("",!0)])]),s("div",ns,[is,s("div",cs,[m(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l(a).user.email=t),type:"email",class:"form-control",id:"inputEmail",placeholder:"Email"},null,512),[[p,l(a).user.email]]),o.value&&o.value.email?(c(),n("span",ds,i(o.value.email[0]),1)):u("",!0)])]),s("div",us,[ms,s("div",ps,[m(s("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l(a).user.jabatan=t),type:"text",class:"form-control",id:"jabatan",placeholder:"Nama Pemeriksa"},null,512),[[p,l(a).user.jabatan]]),o.value&&o.value.jabatan?(c(),n("span",_s,i(o.value.jabatan[0]),1)):u("",!0)])]),s("div",fs,[vs,s("div",hs,[m(s("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>l(a).user.nama_pemeriksa=t),type:"text",class:"form-control",id:"nama_pemeriksa",placeholder:"Nama Pemeriksa"},null,512),[[p,l(a).user.nama_pemeriksa]]),o.value&&o.value.nama_pemeriksa?(c(),n("span",bs,i(o.value.nama_pemeriksa[0]),1)):u("",!0)])]),s("div",ws,[gs,s("div",ys,[m(s("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>l(a).user.nip_pemeriksa=t),type:"text",class:"form-control",id:"nip_pemeriksa",placeholder:"Nama Pemeriksa"},null,512),[[p,l(a).user.nip_pemeriksa]]),o.value&&o.value.nip_pemeriksa?(c(),n("span",ks,i(o.value.nip_pemeriksa[0]),1)):u("",!0)])]),s("div",xs,[Ps,s("div",Cs,[m(s("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>l(a).user.print_layout=t),name:"print_layout",id:"print_layout",class:"form-control"},Vs,512),[[j,l(a).user.print_layout]]),o.value&&o.value.print_layout?(c(),n("span",Ss,i(o.value.print_layout[0]),1)):u("",!0)])]),js],32)]),s("div",Es,[s("form",{onSubmit:h(C,["prevent"]),class:"form-horizontal"},[s("div",Ds,[Bs,s("div",Fs,[m(s("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>d.currentPassword=t),type:"password",class:"form-control",id:"currentPassword",placeholder:"Current Password"},null,512),[[p,d.currentPassword]]),o.value&&o.value.current_password?(c(),n("span",Ls,i(o.value.current_password[0]),1)):u("",!0)])]),s("div",Ms,[Is,s("div",Ts,[m(s("input",{"onUpdate:modelValue":e[8]||(e[8]=t=>d.password=t),type:"password",class:"form-control",id:"newPassword",placeholder:"New Password"},null,512),[[p,d.password]]),o.value&&o.value.password?(c(),n("span",zs,i(o.value.password[0]),1)):u("",!0)])]),s("div",As,[Ws,s("div",Hs,[m(s("input",{"onUpdate:modelValue":e[9]||(e[9]=t=>d.passwordConfirmation=t),type:"password",class:"form-control",id:"passwordConfirmation",placeholder:"Confirm New Password"},null,512),[[p,d.passwordConfirmation]])])]),Js],32)])])])]),s("button",{onClick:h(P,["prevent"]),type:"button",class:"btn btn-danger btn-block"},[$s,b(" Logout")])])])])])],64)}}};export{Os as default};
