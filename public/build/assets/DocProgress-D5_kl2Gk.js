import{_ as P,g as i,y as V,q as B,c as l,a as e,j as L,B as $,F as v,z as D,l as C,t as o,A as U,i as I,m as z,o as n,I as W,h as A,w as F,b as G,p as T,e as q}from"./app--yyIGIhA.js";import{u as E}from"./MasterDataStore-CSBsGfpo.js";import"./LoadingStore-BAHgNWPs.js";const c=d=>(T("data-v-ba1d8a33"),d=d(),q(),d),H=c(()=>e("section",{class:"content-header"},[e("div",{class:"container-fluid"},[e("h1",{class:"mb-2"},"Daftar Upload")])],-1)),J={class:"content"},K={class:"container-fluid"},O={class:"card"},Q={class:"card-header d-flex"},R=c(()=>e("option",{disabled:"",value:""},"-- Pilih Unit Kerja --",-1)),X=["value"],Y={class:"card-body table-responsive p-0"},Z={class:"table table-bordered table-hover text-sm"},ee=c(()=>e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Nama"),e("th",null,"Jabatan"),e("th",null,"NIP"),e("th",null,"Status"),e("th",null,"Progress"),e("th",null,"Aksi")])],-1)),te={key:0},ae=c(()=>e("td",{colspan:"7",class:"text-center"},"Memuat data...",-1)),se=[ae],oe={key:1},le=c(()=>e("td",{colspan:"7",class:"text-center"},"Tidak ada data pengguna ditemukan.",-1)),ne=[le],re={width:"25%"},ie={class:"progress progress-xs"},ce=["aria-valuenow"],de={key:0,class:"card-footer clearfix"},ue={class:"d-flex justify-content-between align-items-center"},_e={class:"text-muted"},pe={class:"pagination pagination-sm m-0"},me={class:"page-item disabled"},ve={class:"page-link"},ge={__name:"DocProgress",setup(d){const _=i([]),g=i([]),r=i(""),p=i(!1),h=E(),a=i({current_page:1,per_page:10,total:0,from:0,to:0,last_page:1}),M=async()=>{try{await h.getWorkunitList(),g.value=h.workunitList}catch(u){console.error("Gagal memuat unit kerja:",u)}},m=async(u=1)=>{if(r.value){p.value=!0;try{const s=await z.get("/api/users",{params:{page:u,work_unit_id:r.value}});_.value=s.data.data,a.value={...a.value,...s.data.meta,...s.data}}catch(s){console.error("Gagal memuat data pengguna:",s)}finally{p.value=!1}}};return V(()=>{M()}),(u,s)=>{const N=B("router-link");return n(),l(v,null,[H,e("section",J,[e("div",K,[e("div",O,[e("div",Q,[L(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>r.value=t),class:"form-control mr-2",onChange:m},[R,(n(!0),l(v,null,D(g.value,t=>(n(),l("option",{key:t.id,value:t.id},o(t.text),9,X))),128))],544),[[$,r.value]])]),e("div",Y,[e("table",Z,[ee,e("tbody",null,[p.value?(n(),l("tr",te,se)):_.value.length===0&&r.value?(n(),l("tr",oe,ne)):C("",!0),(n(!0),l(v,null,D(_.value,(t,j)=>{var f,k,b,y,x,w,S;return n(),l("tr",{key:t.id},[e("td",null,o(j+1+(a.value.current_page-1)*a.value.per_page),1),e("td",null,[e("strong",null,o(((f=t.employee)==null?void 0:f.full_name)||t.name),1)]),e("td",null,o(((k=t.employee)==null?void 0:k.job_title)||"-"),1),e("td",null,o(((b=t.employee)==null?void 0:b.nip)||"-"),1),e("td",null,o(((y=t.employee)==null?void 0:y.employment_status)||"-"),1),e("td",re,[e("div",ie,[e("div",{class:"progress-bar bg-success",role:"progressbar",style:W({width:`${((x=t.employee)==null?void 0:x.progress_dokumen)||0}%`}),"aria-valuenow":((w=t.employee)==null?void 0:w.progress_dokumen)||0,"aria-valuemin":"0","aria-valuemax":"100"},null,12,ce)]),e("small",null,o(((S=t.employee)==null?void 0:S.progress_dokumen)||0)+"%",1)]),e("td",null,[A(N,{to:`/admin/users/${t.id}/documents`,class:"btn btn-sm btn-info mr-1"},{default:F(()=>[G(" Dokumen ")]),_:2},1032,["to"])])])}),128))])])]),r.value?(n(),l("div",de,[e("div",ue,[e("div",_e," Menampilkan "+o(a.value.from)+" - "+o(a.value.to)+" dari "+o(a.value.total)+" pengguna ",1),e("ul",pe,[e("li",{class:U(["page-item",{disabled:a.value.current_page===1}])},[e("a",{class:"page-link",href:"#",onClick:s[1]||(s[1]=I(t=>m(a.value.current_page-1),["prevent"]))},"«")],2),e("li",me,[e("span",ve,"Halaman "+o(a.value.current_page)+" / "+o(a.value.last_page),1)]),e("li",{class:U(["page-item",{disabled:a.value.current_page===a.value.last_page}])},[e("a",{class:"page-link",href:"#",onClick:s[2]||(s[2]=I(t=>m(a.value.current_page+1),["prevent"]))},"»")],2)])])])):C("",!0)])])])],64)}}},be=P(ge,[["__scopeId","data-v-ba1d8a33"]]);export{be as default};
