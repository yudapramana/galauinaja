import{_ as w,u as k,e as x,r as S,f as p,c as r,g as m,w as c,T as g,a as e,h as A,i as u,v,j as M,b,o as i,k as f,t as D,l as V}from"./app-Dlfs4giq.js";import{u as L}from"./MasterDataStore-BXQyakUK.js";import"./LoadingStore-DPteO5aV.js";const T={class:"login-page"},U={key:0,class:"loading-overlay"},I={class:"login-box"},N={class:"card card-outline card-success"},P={class:"card-body login-card-body"},z={key:0,class:"alert alert-danger",role:"alert"},B={class:"input-group mb-3"},C={class:"input-group mb-3"},R={class:"row"},j={class:"col-8"},q={class:"icheck-primary"},G={class:"col-4"},K=["disabled"],E={key:0},H={key:1},F={__name:"Login",setup(J){const n=k(),_=L(),y=x(),a=S({username:"",password:"",remember:!0}),o=p(!1),l=p(""),h=async()=>{var d,s;o.value=!0,l.value="";try{await V.post("/login",a),await n.getAuthUser(),await _.getDoctypeList(),await n.getMyDocuments(),n.isAuthenticated=!0,n.activeLayout="user",y.push("/user/dashboard")}catch(t){console.error("Login error:",t),l.value=((s=(d=t.response)==null?void 0:d.data)==null?void 0:s.message)||"Terjadi kesalahan saat login."}finally{setTimeout(()=>{o.value=!1},400)}};return(d,s)=>(i(),r("div",T,[m(g,{name:"fade"},{default:c(()=>[o.value?(i(),r("div",U,s[3]||(s[3]=[e("div",{class:"spinner"},null,-1),e("p",null,"Memproses login...",-1)]))):f("",!0)]),_:1}),e("div",I,[s[9]||(s[9]=e("div",{class:"login-logo text-center mb-4"},[e("h1",{class:"mb-1",style:{"font-size":"1.75rem","font-weight":"700",color:"#28a745"}},"SIGARDA"),e("p",{class:"mb-0",style:{"font-size":"0.95rem","font-weight":"500"}},"Sistem Informasi Gerbang Arsip Digital Pegawai"),e("p",{style:{"font-size":"0.85rem",color:"#6c757d"}},"Kementerian Agama Kab. Pesisir Selatan")],-1)),e("div",N,[e("div",P,[s[7]||(s[7]=e("p",{class:"login-box-msg"},"Silakan masuk untuk memulai sesi",-1)),m(g,{name:"fade"},{default:c(()=>[l.value?(i(),r("div",z,D(l.value),1)):f("",!0)]),_:1}),e("form",{onSubmit:A(h,["prevent"]),autocomplete:"off"},[e("div",B,[u(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>a.username=t),type:"text",class:"form-control",placeholder:"NIP Anda",required:""},null,512),[[v,a.username]]),s[4]||(s[4]=e("div",{class:"input-group-append"},[e("div",{class:"input-group-text"},[e("span",{class:"fas fa-envelope"})])],-1))]),e("div",C,[u(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>a.password=t),type:"password",class:"form-control",placeholder:"Password",required:""},null,512),[[v,a.password]]),s[5]||(s[5]=e("div",{class:"input-group-append"},[e("div",{class:"input-group-text"},[e("span",{class:"fas fa-lock"})])],-1))]),e("div",R,[e("div",j,[e("div",q,[u(e("input",{type:"checkbox",id:"remember","onUpdate:modelValue":s[2]||(s[2]=t=>a.remember=t)},null,512),[[M,a.remember]]),s[6]||(s[6]=e("label",{for:"remember"},"Â  Remember Me",-1))])]),e("div",G,[e("button",{type:"submit",class:"btn btn-primary btn-block",disabled:o.value},[o.value?(i(),r("span",E,"Memuat...")):(i(),r("span",H,"Sign In"))],8,K)])])],32),s[8]||(s[8]=e("p",{class:"mb-1"},[e("a",{href:"#"},[b("Lupa Password? "),e("br"),b(" Hubungi Admin Satker")])],-1))])])])]))}},X=w(F,[["__scopeId","data-v-80034517"]]);export{X as default};
