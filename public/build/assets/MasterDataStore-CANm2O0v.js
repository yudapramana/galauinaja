import{R as w,K as a,e as r,u as v,r as U,x as c}from"./app-C1lI8Hy_.js";import{u as A}from"./LoadingStore-Gr-Q0vTe.js";const C=w("MasterDataStore",()=>{const L=a("MasterDataStore:orgId",r("")),I=a("MasterDataStore:userId",r("")),p=a("MasterDataStore:orgList",r([])),u=a("MasterDataStore:userList",r({})),i=a("MasterDataStore:doctypeList",r([])),g=a("MasterDataStore:workunitList",r([])),l=a("MasterDataStore:workUnitMonitorList",r([])),y=a("MasterDataStore:docParameters",r([1,2,3,4,5,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025,"D2","D3","S1","S2","S3","IIa","IIb","IIc","IId","IIIa","IIIb","IIIc","IIId","IVa","IVb","Suami","Istri"])),o=A(),s=v(),h=async()=>{console.log("getWorkUnitMonitorList start"),l.value.length==0&&(console.log("getWorkUnitMonitorList runned"),o.toggleLoading(),await c.get("/api/work-units/monitor").then(t=>{l.value=t,o.toggleLoading(),console.log("workUnitMonitorList hasbeenfetched")}).catch(t=>{o.toggleLoading(),s.handleAuthError(t)}))},S=async()=>{g.value.length==0&&(o.toggleLoading(),await c.get("/api/master",{params:{type:"workunits"}}).then(t=>{g.value=t.data.data,o.toggleLoading(),console.log("workunitList hasbeenfetched")}).catch(t=>{o.toggleLoading(),s.handleAuthError(t)}))},m=async(t=null)=>{if(console.log("doctypeList.value.length:",i.value.length),i.value.length===0||s.user.role=="SUPERADMIN"||s.user.role=="ADMIN"){o.toggleLoading();try{const e=await c.get("/api/master",{params:{type:"doctypes",...t&&{user_id:t}}});i.value=e.data.data}catch(e){console.error("doctypeList fetch error:",e),s.handleAuthError(e)}finally{o.toggleLoading()}}},f=async t=>{o.toggleLoading(),await c.get("/api/master",{params:{type:"users",id:t}}).then(e=>{u.value=e.data.data,o.toggleLoading()}).catch(e=>{o.toggleLoading(),s.handleAuthError(e)})},n=U({});function M(t,e){n[String(t)]=Array.isArray(e)?e:[];try{sessionStorage.setItem("empCache",JSON.stringify(n))}catch{}}function k(){try{const t=sessionStorage.getItem("empCache");if(!t)return;const e=JSON.parse(t)||{};for(const d of Object.keys(e))n[d]=e[d]}catch{}}function D(){for(const t of Object.keys(n))delete n[t];try{sessionStorage.removeItem("empCache")}catch{}}return{orgId:L,userId:I,orgList:p,userList:u,doctypeList:i,workunitList:g,docParameters:y,workUnitMonitorList:l,employeesCacheByUnit:n,getUserList:f,getDoctypeList:m,getWorkunitList:S,getWorkUnitMonitorList:h,setEmployees:M,hydrateEmployeesCache:k,getWorkUnitMonitorList:h,clearEmployeesCache:D}});export{C as u};
