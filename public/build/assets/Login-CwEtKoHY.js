import{_ as w,u as k,r as x,e as p,f as S,c as r,o as i,g as m,a as e,w as c,T as g,h as M,i as u,v,j as A,d as b,k as D,l as f,t as V,m as L}from"./app-CwYVTs8b.js";import{u as T}from"./MasterDataStore-BmJoauJl.js";import"./LoadingStore-5AtYiIvZ.js";const U={class:"login-page"},I={key:0,class:"loading-overlay"},N={class:"login-box"},P={class:"card card-outline card-success"},z={class:"card-body login-card-body"},B={key:0,class:"alert alert-danger",role:"alert"},C={class:"input-group mb-3"},R={class:"input-group mb-3"},j={class:"row"},q={class:"col-8"},G={class:"icheck-primary"},K={class:"col-4"},E=["disabled"],H={key:0},F={key:1},J={__name:"Login",setup(O){const n=k(),_=T(),y=D(),a=x({username:"",password:"",remember:!0}),o=p(!1),l=p("");S(()=>{});const h=async()=>{var d,s;o.value=!0,l.value="";try{await L.post("/login",{...a}),await n.getAuthUser(),await _.getDoctypeList(),await n.getMyDocuments(),n.isAuthenticated=!0,n.activeLayout="user",y.push("/user/dashboard")}catch(t){console.error("Login error:",t),l.value=((s=(d=t.response)==null?void 0:d.data)==null?void 0:s.message)||"Terjadi kesalahan saat login."}finally{setTimeout(()=>{o.value=!1},400)}};return(d,s)=>(i(),r("div",U,[m(g,{name:"fade"},{default:c(()=>[o.value?(i(),r("div",I,s[3]||(s[3]=[e("div",{class:"spinner"},null,-1),e("p",null,"Memproses login...",-1)]))):f("",!0)]),_:1}),e("div",N,[s[9]||(s[9]=e("div",{class:"login-logo text-center mb-4"},[e("h1",{class:"mb-1",style:{"font-size":"1.75rem","font-weight":"700",color:"#28a745"}},"SIGARDA"),e("p",{class:"mb-0",style:{"font-size":"0.95rem","font-weight":"500"}},"Sistem Informasi Gerbang Arsip Digital Pegawai"),e("p",{style:{"font-size":"0.85rem",color:"#6c757d"}},"Kementerian Agama Kab. Pesisir Selatan")],-1)),e("div",P,[e("div",z,[s[7]||(s[7]=e("p",{class:"login-box-msg"},"Silakan masuk untuk memulai sesi",-1)),m(g,{name:"fade"},{default:c(()=>[l.value?(i(),r("div",B,V(l.value),1)):f("",!0)]),_:1}),e("form",{onSubmit:M(h,["prevent"]),autocomplete:"off"},[e("div",C,[u(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>a.username=t),type:"text",class:"form-control",placeholder:"NIP Anda",required:""},null,512),[[v,a.username]]),s[4]||(s[4]=e("div",{class:"input-group-append"},[e("div",{class:"input-group-text"},[e("span",{class:"fas fa-envelope"})])],-1))]),e("div",R,[u(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>a.password=t),type:"password",class:"form-control",placeholder:"Password",required:""},null,512),[[v,a.password]]),s[5]||(s[5]=e("div",{class:"input-group-append"},[e("div",{class:"input-group-text"},[e("span",{class:"fas fa-lock"})])],-1))]),e("div",j,[e("div",q,[e("div",G,[u(e("input",{type:"checkbox",id:"remember","onUpdate:modelValue":s[2]||(s[2]=t=>a.remember=t)},null,512),[[A,a.remember]]),s[6]||(s[6]=e("label",{for:"remember"},"Â  Remember Me",-1))])]),e("div",K,[e("button",{type:"submit",class:"btn btn-primary btn-block",disabled:o.value},[o.value?(i(),r("span",H,"Memuat...")):(i(),r("span",F,"Sign In"))],8,E)])])],32),s[8]||(s[8]=e("p",{class:"mb-1"},[e("a",{href:"#"},[b("Lupa Password? "),e("br"),b(" Hubungi Admin Satker")])],-1))])])])]))}},Y=w(J,[["__scopeId","data-v-8fb03fe0"]]);export{Y as default};
