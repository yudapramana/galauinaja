import{_ as P,f as i,s as V,n as j,c as o,a as e,i as L,z as $,F as m,x as w,k as D,t as l,y as C,h as U,l as z,o as n,G as B,g as G,w as W,b as F}from"./app-j8hqMp9K.js";import{u as I}from"./MasterDataStore-Xes_Aze3.js";import"./LoadingStore-gTbx84sl.js";const T={class:"content"},A={class:"container-fluid"},E={class:"card"},H={class:"card-header d-flex"},J=["value"],K={class:"card-body table-responsive p-0"},q={class:"table table-bordered table-hover text-sm"},O={key:0},Q={key:1},R={width:"25%"},X={class:"progress progress-xs"},Y=["aria-valuenow"],Z={key:0,class:"card-footer clearfix"},ee={class:"d-flex justify-content-between align-items-center"},te={class:"text-muted"},ae={class:"pagination pagination-sm m-0"},se={class:"page-item disabled"},le={class:"page-link"},oe={__name:"DocProgress",setup(ne){const u=i([]),v=i([]),r=i(""),c=i(!1),_=I(),s=i({current_page:1,per_page:10,total:0,from:0,to:0,last_page:1}),M=async()=>{try{await _.getWorkunitList(),v.value=_.workunitList}catch(d){console.error("Gagal memuat unit kerja:",d)}},p=async(d=1)=>{if(r.value){c.value=!0;try{const t=await z.get("/api/users",{params:{page:d,work_unit_id:r.value}});u.value=t.data.data,s.value={...s.value,...t.data.meta,...t.data}}catch(t){console.error("Gagal memuat data pengguna:",t)}finally{c.value=!1}}};return V(()=>{M()}),(d,t)=>{const N=j("router-link");return n(),o(m,null,[t[8]||(t[8]=e("section",{class:"content-header"},[e("div",{class:"container-fluid"},[e("h1",{class:"mb-2"},"Daftar Upload")])],-1)),e("section",T,[e("div",A,[e("div",E,[e("div",H,[L(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>r.value=a),class:"form-control mr-2",onChange:p},[t[3]||(t[3]=e("option",{disabled:"",value:""},"-- Pilih Unit Kerja --",-1)),(n(!0),o(m,null,w(v.value,a=>(n(),o("option",{key:a.id,value:a.id},l(a.text),9,J))),128))],544),[[$,r.value]])]),e("div",K,[e("table",q,[t[7]||(t[7]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Nama"),e("th",null,"Jabatan"),e("th",null,"NIP"),e("th",null,"Status"),e("th",null,"Progress"),e("th",null,"Aksi")])],-1)),e("tbody",null,[c.value?(n(),o("tr",O,t[4]||(t[4]=[e("td",{colspan:"7",class:"text-center"},"Memuat data...",-1)]))):u.value.length===0&&r.value?(n(),o("tr",Q,t[5]||(t[5]=[e("td",{colspan:"7",class:"text-center"},"Tidak ada data pengguna ditemukan.",-1)]))):D("",!0),(n(!0),o(m,null,w(u.value,(a,S)=>{var g,f,k,h,y,b,x;return n(),o("tr",{key:a.id},[e("td",null,l(S+1+(s.value.current_page-1)*s.value.per_page),1),e("td",null,[e("strong",null,l(((g=a.employee)==null?void 0:g.full_name)||a.name),1)]),e("td",null,l(((f=a.employee)==null?void 0:f.job_title)||"-"),1),e("td",null,l(((k=a.employee)==null?void 0:k.nip)||"-"),1),e("td",null,l(((h=a.employee)==null?void 0:h.employment_status)||"-"),1),e("td",R,[e("div",X,[e("div",{class:"progress-bar bg-success",role:"progressbar",style:B({width:`${((y=a.employee)==null?void 0:y.progress_dokumen)||0}%`}),"aria-valuenow":((b=a.employee)==null?void 0:b.progress_dokumen)||0,"aria-valuemin":"0","aria-valuemax":"100"},null,12,Y)]),e("small",null,l(((x=a.employee)==null?void 0:x.progress_dokumen)||0)+"%",1)]),e("td",null,[G(N,{to:`/admin/users/${a.id}/documents`,class:"btn btn-sm btn-info mr-1"},{default:W(()=>t[6]||(t[6]=[F(" Dokumen ")])),_:2},1032,["to"])])])}),128))])])]),r.value?(n(),o("div",Z,[e("div",ee,[e("div",te," Menampilkan "+l(s.value.from)+" - "+l(s.value.to)+" dari "+l(s.value.total)+" pengguna ",1),e("ul",ae,[e("li",{class:C(["page-item",{disabled:s.value.current_page===1}])},[e("a",{class:"page-link",href:"#",onClick:t[1]||(t[1]=U(a=>p(s.value.current_page-1),["prevent"]))},"«")],2),e("li",se,[e("span",le,"Halaman "+l(s.value.current_page)+" / "+l(s.value.last_page),1)]),e("li",{class:C(["page-item",{disabled:s.value.current_page===s.value.last_page}])},[e("a",{class:"page-link",href:"#",onClick:t[2]||(t[2]=U(a=>p(s.value.current_page+1),["prevent"]))},"»")],2)])])])):D("",!0)])])])],64)}}},ue=P(oe,[["__scopeId","data-v-7739aefa"]]);export{ue as default};
