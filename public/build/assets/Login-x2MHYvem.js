import{_ as S,u as x,f as A,r as M,g as m,c as i,h as _,w as h,T as b,a as e,i as D,j as p,v as g,k as I,o as n,l as v,t as V,p as L,e as T,b as f,m as U}from"./app-Dj2lpDik.js";import{u as N}from"./MasterDataStore-DtEJgPlY.js";import"./LoadingStore-DQIEXr-H.js";const a=l=>(L("data-v-4ed9fbb4"),l=l(),T(),l),P={class:"login-page"},z={key:0,class:"loading-overlay"},B=a(()=>e("div",{class:"spinner"},null,-1)),C=a(()=>e("p",null,"Memproses login...",-1)),R=[B,C],j={class:"login-box"},q=a(()=>e("div",{class:"login-logo text-center mb-4"},[e("h1",{class:"mb-1",style:{"font-size":"1.75rem","font-weight":"700",color:"#28a745"}},"SIGARDA"),e("p",{class:"mb-0",style:{"font-size":"0.95rem","font-weight":"500"}},"Sistem Informasi Gerbang Arsip Digital Pegawai"),e("p",{style:{"font-size":"0.85rem",color:"#6c757d"}},"Kementerian Agama Kab. Pesisir Selatan")],-1)),G={class:"card card-outline card-success"},K={class:"card-body login-card-body"},E=a(()=>e("p",{class:"login-box-msg"},"Silakan masuk untuk memulai sesi",-1)),H={key:0,class:"alert alert-danger",role:"alert"},F={class:"input-group mb-3"},J=a(()=>e("div",{class:"input-group-append"},[e("div",{class:"input-group-text"},[e("span",{class:"fas fa-envelope"})])],-1)),O={class:"input-group mb-3"},Q=a(()=>e("div",{class:"input-group-append"},[e("div",{class:"input-group-text"},[e("span",{class:"fas fa-lock"})])],-1)),W={class:"row"},X={class:"col-8"},Y={class:"icheck-primary"},Z=a(()=>e("label",{for:"remember"},"Â  Remember Me",-1)),$={class:"col-4"},ee=["disabled"],se={key:0},te={key:1},ae=a(()=>e("p",{class:"mb-1"},[e("a",{href:"#"},[f("Lupa Password? "),e("br"),f(" Hubungi Admin Satker")])],-1)),oe={__name:"Login",setup(l){const d=x(),y=N(),w=A(),o=M({username:"",password:"",remember:!0}),r=m(!1),c=m(""),k=async()=>{var u,s;r.value=!0,c.value="";try{await U.post("/login",o),await d.getAuthUser(),await y.getDoctypeList(),await d.getMyDocuments(),d.isAuthenticated=!0,d.activeLayout="user",w.push("/user/dashboard")}catch(t){console.error("Login error:",t),c.value=((s=(u=t.response)==null?void 0:u.data)==null?void 0:s.message)||"Terjadi kesalahan saat login."}finally{setTimeout(()=>{r.value=!1},400)}};return(u,s)=>(n(),i("div",P,[_(b,{name:"fade"},{default:h(()=>[r.value?(n(),i("div",z,R)):v("",!0)]),_:1}),e("div",j,[q,e("div",G,[e("div",K,[E,_(b,{name:"fade"},{default:h(()=>[c.value?(n(),i("div",H,V(c.value),1)):v("",!0)]),_:1}),e("form",{onSubmit:D(k,["prevent"]),autocomplete:"off"},[e("div",F,[p(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>o.username=t),type:"text",class:"form-control",placeholder:"NIP Anda",required:""},null,512),[[g,o.username]]),J]),e("div",O,[p(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>o.password=t),type:"password",class:"form-control",placeholder:"Password",required:""},null,512),[[g,o.password]]),Q]),e("div",W,[e("div",X,[e("div",Y,[p(e("input",{type:"checkbox",id:"remember","onUpdate:modelValue":s[2]||(s[2]=t=>o.remember=t)},null,512),[[I,o.remember]]),Z])]),e("div",$,[e("button",{type:"submit",class:"btn btn-primary btn-block",disabled:r.value},[r.value?(n(),i("span",se,"Memuat...")):(n(),i("span",te,"Sign In"))],8,ee)])])],32),ae])])])]))}},le=S(oe,[["__scopeId","data-v-4ed9fbb4"]]);export{le as default};
