import{R as L,K as o,e as r,u as h,q as g}from"./app-BA_ZFPr6.js";import{u as p}from"./LoadingStore-DDdecpp0.js";const f=L("MasterDataStore",()=>{const d=o("MasterDataStore:orgId",r("")),u=o("MasterDataStore:userId",r("")),l=o("MasterDataStore:orgList",r([])),c=o("MasterDataStore:userList",r({})),n=o("MasterDataStore:doctypeList",r([])),i=o("MasterDataStore:workunitList",r([])),I=o("MasterDataStore:docParameters",r([1,2,3,4,2022,2023,2024,2025,"D2","D3","S1","S2","S3","IIa","IIb","IIc","IId","IIIa","IIIb","IIIc","IIId","IVa","IVb","Suami","Istri"])),t=p(),s=h();return{orgId:d,userId:u,orgList:l,userList:c,doctypeList:n,workunitList:i,docParameters:I,getUserList:async e=>{t.toggleLoading(),await g.get("/api/master",{params:{type:"users",id:e}}).then(a=>{c.value=a.data.data,t.toggleLoading()}).catch(a=>{t.toggleLoading(),s.handleAuthError(a)})},getDoctypeList:async(e=null)=>{if(console.log("doctypeList.value.length:",n.value.length),n.value.length===0||s.user.role=="SUPERADMIN"||s.user.role=="ADMIN"){t.toggleLoading();try{const a=await g.get("/api/master",{params:{type:"doctypes",...e&&{user_id:e}}});n.value=a.data.data}catch(a){console.error("doctypeList fetch error:",a),s.handleAuthError(a)}finally{t.toggleLoading()}}},getWorkunitList:async()=>{i.value.length==0&&(t.toggleLoading(),await g.get("/api/master",{params:{type:"workunits"}}).then(e=>{i.value=e.data.data,t.toggleLoading(),console.log("workunitList hasbeenfetched")}).catch(e=>{t.toggleLoading(),s.handleAuthError(e)}))}}});export{f as u};
